const translations = {
    "en": {
        "nav_home": "Home",
        "nav_events": "Events",
        "nav_about": "About",
        "nav_contact": "Contact",
        "footer_rights": "© 2025 City Events Guide. All rights reserved.",
        "footer_contact_text": "Contact us:",
        "footer_follow_text": "Follow us:",
        "details_page_html_title": "City Events Guide - Event Details",
        "events_page_html_title": "City Events Guide - Events",
        "index_page_html_title": "City Events Guide - Home",
        "about_page_html_title": "City Events Guide - About Us",
        "contact_page_html_title": "City Events Guide - Contact Us",
        "hero_title": "Discover Your City's Pulse",
        "hero_tagline": "The best local events, concerts, and gatherings, all in one place.",
        "explore_events_button": "Explore Events Now",
        "feature_section_title": "Why Choose Us?",
        "feature1_title": "🎉 Unique Events",
        "feature1_desc": "We bring you the most exciting and exclusive city events every week.",
        "feature2_title": "⚡ Easy Experience",
        "feature2_desc": "Find and book events effortlessly with our user-friendly design.",
        "feature3_title": "🌍 Wide Coverage",
        "feature3_desc": "From concerts to food fairs, we cover all event categories for everyone.",
   
        "view_details_button": "View Details",
        "upcoming_events_title": "Upcoming Events",
        "upcoming_event_1_title": "Global Food Fair",
        "upcoming_event_1_desc": "Taste diverse cuisines from around the world",
        "upcoming_event_2_title": "Annual City Marathon",
        "upcoming_event_2_desc": "Join the race for health and charity",
        "upcoming_event_3_title": "Modern Art Exhibition",
        "upcoming_event_3_desc": "Showcasing works from 20 emerging artists",
        "cta_secondary_title": "Ready to find your next great event?",
        "cta_secondary_subtitle": "Browse through hundreds of exciting opportunities happening this month!",
        "event1_title": "City Summer Fest 🎵",
        "event5_title": "Community Fun Day",
        "event1_desc": "A three-day music festival featuring local bands",
        "event5_desc": "Games, food stalls, and entertainment for all ages",
        "carousel2_title": "International Food Fair 🌮",
        "carousel2_desc": "Taste dishes from around the world in one location.",
        "carousel3_title": "Annual City Marathon 🏃",
        "carousel3_desc": "Join the biggest race of the year!",
        "events_page_title": "All City Events",
        "events_page_desc": "Browse through the complete list of happenings in the city.",
        "filter_category_title": "Filter by Category",
        "filter_date_title": "Filter by Date",
        "category_all": "All Categories",
        "category_music": "Music",
        "category_sports": "Sports",
        "category_arts": "Arts & Culture",
        "category_food": "Food & Drink",
        "filter_family": "Family",
        "filter_search_label": "Search:",
        "search_placeholder": "Search by Event Name or Location...",
        "no_results_message": "No events found matching your criteria",
        "filter_apply": "Apply Filters",
        "card_date": "🗓️ Date:",
        "card_location": "📍 Location:",
        "card_category": "🏷️ Category:",
        "card_price_label": "💲 Price:",
        "book_tickets_button": "Book Tickets Now",
        "watch_promo_button": "Watch Promo on YouTube",
        "add_to_calendar": "📅 Add to Calendar",
        "share_text": "Share:",
        "share_facebook": "FB",
        "share_twitter": "X",
        "share_email": "Email",
        "event_about_title": "About the Event",
        "event_quick_facts_title": "Event Quick Facts",
        "contact_organizer_button": "Contact Organizer",
        "related_events_title": "Related Events You Might Like",
        "event_not_found": "Event not found.",
        "no_related_events": "No related events found in the same category.",
        "about_page_title": "About City Events Guide",
        "about_page_desc": "Your ultimate guide to local events and activities.",
        "mission_title": "Our Mission",
        "mission_text1": "Our mission is to connect people with the vibrant life of the city. We believe that every city corner holds a unique story, an exciting event, or a hidden gem waiting to be discovered. By aggregating all local events in one easy-to-use platform, we ensure you never miss out on the action.",
        "mission_text2": "Whether it’s a small art exhibition, a major music festival, or a local community gathering, we aim to be the most comprehensive and reliable source for city entertainment.",
        "our_team_title": "Our Team",
        "our_team_text": "The City Events Guide project was developed as part of the Web Programming course (BWP401). Our team is dedicated to building robust, accessible, and user-friendly web applications. We are proud of this project and continuously look for ways to enhance the user experience.",
        "tech_stack_title": "Technology Used",
        "tech_stack_1": "Bootstrap 5 (for responsive design)",
        "tech_stack_2": "HTML5 & CSS3",
        "tech_stack_3": "Vanilla JavaScript (for localization and filtering)",
        "contributor_title": "**Project Contributors**",
        "contributor_hala_name": "Hala Nejmeh",
        "contributor_thaer_name": "Thaer Sheryeh",
        "contributor_hani_name": "Hani Abbas",

        "contributor_hala_role": "Project Manager & Lead Developer", 
        "contributor_thaer_role": "Frontend Developer & Filtering",
        "contributor_hani_role": "Localization & Testing Specialist",

        "contributor_course": "**Course**",
        "contributor_instructor": "**Instructor: Dr. Bassel Al-Khateeb**",
        "contact_sidebar_title": "Quick Contact",
        "contact_us_button": "Contact Us",
        "view_events_button": "View All Events",
        "contact_page_title": "Contact Us",
        "contact_page_desc": "Have a question or want to collaborate? Get in touch!",
        "contact_form_title": "Send us a Message",
        "contact_form_name": "Your Name",
        "contact_form_email": "Email Address",
        "contact_form_subject": "Subject",
        "contact_form_message": "Message",
        "contact_form_submit": "Send Message",
        "contact_info_title": "Contact Information",
        "contact_info_email_label": "Email:",
        "contact_info_phone_label": "Phone:",
        "contact_info_address_label": "Address:",
        "contact_office_hours_title": "Office Hours",
        "contact_hours_details": "Monday - Friday: 9:00 AM - 5:00 PM",
        "contact_follow_us_title": "Follow Us",
        "social_facebook": "Facebook",
        "social_twitter": "Twitter",
        "social_instagram": "Instagram",
        "event1_title_about_text1": "The City Summer Fest is the city's premier annual music event, celebrating local talent and attracting thousands of visitors. It features multiple stages, food trucks, and art installations. Don't miss the chance to experience the best music scene the city has to offer!",
        "event1_title_about_text2": "Tickets are selling fast. Book your spot now for the three-day pass!",
        "upcoming_event_1_title_about_text1": "The Global Food Fair brings together over 50 international vendors offering authentic dishes and unique culinary experiences. It's a perfect day out for food lovers.",
        "upcoming_event_1_title_about_text2": "Admission is free, but come hungry! Enjoy cooking demonstrations and live cultural music.",
        "upcoming_event_3_title_about_text1": "This annual exhibition showcases contemporary works from emerging local and international artists. Explore sculptures, paintings, and digital art in a stunning museum setting.",
        "upcoming_event_3_title_about_text2": "Limited edition prints are available for purchase. Join the opening reception on the first day!",
        "upcoming_event_2_title_about_text1": "Participate in the city's biggest annual run! Choose between the full marathon, half marathon, or the fun 5K. All proceeds go to local children's charities.",
        "upcoming_event_2_title_about_text2": "Register early to secure your spot and receive a commemorative t-shirt and medal.",
        "event5_title_about_text1": "A perfect day for the whole family! Enjoy face painting, bouncy castles, local food vendors, and performances by community groups. All activities are free.",
        "event5_title_about_text2": "Join us in the City Park Pavilion for a day of smiles and community spirit. Event runs from 10 AM to 4 PM.",
        "error_invalid_date": "Invalid Date",
        "date_range_separator": " - ",
    },
    "ar": {
        "nav_home": "الرئيسية",
        "nav_events": "الفعاليات",
        "nav_about": "حول",
        "nav_contact": "اتصل بنا",
        "footer_rights": "© 2025 دليل فعاليات المدينة. جميع الحقوق محفوظة.",
        "footer_contact_text": "اتصل بنا:",
        "footer_follow_text": "تابعنا:",
        "details_page_html_title": "دليل فعاليات المدينة - تفاصيل الفعالية",
        "events_page_html_title": "دليل فعاليات المدينة - الفعاليات",
        "index_page_html_title": "دليل فعاليات المدينة - الرئيسية",
        "about_page_html_title": "دليل فعاليات المدينة - حول",
        "contact_page_html_title": "دليل فعاليات المدينة - اتصل بنا",
        "hero_title": "اكتشف نبض مدينتك",
        "hero_tagline": "أفضل الفعاليات المحلية والحفلات والتجمعات، كلها في مكان واحد.",
        "explore_events_button": "استكشف الفعاليات الآن",
        "feature_section_title": "لماذا تختارنا؟",
        "feature1_title": "🎉 فعاليات مميزة",
        "feature1_desc": "نقدم لك أكثر الفعاليات إثارة وتميزًا في مدينتك كل أسبوع.",
        "feature2_title": "⚡ تجربة سهلة",
        "feature2_desc": "ابحث واحجز فعالياتك بسهولة من خلال تصميم بسيط وسهل الاستخدام.",
        "feature3_title": "🌍 تغطية واسعة",
        "feature3_desc": "من الحفلات إلى مهرجانات الطعام، نغطي جميع أنواع الفعاليات للجميع.",
        "trending_title": "الفعاليات الأكثر تداولاً هذا الأسبوع",
        "view_details_button": "عرض التفاصيل",
        "upcoming_events_title": "الفعاليات القادمة",
        "upcoming_event_1_title": "معرض الغذاء العالمي",
        "upcoming_event_1_desc": "تذوق مأكولات متنوعة من جميع أنحاء العالم",
        "upcoming_event_2_title": "ماراثون المدينة السنوي",
        "upcoming_event_2_desc": "انضم إلى السباق من أجل الصحة والأعمال الخيرية",
        "upcoming_event_3_title": "معرض الفن الحديث",
        "upcoming_event_3_desc": "عرض أعمال من 20 فناناً صاعداً",
        "cta_secondary_title": "هل أنت مستعد للعثور على فعاليتك الرائعة التالية؟",
        "cta_secondary_subtitle": "تصفح المئات من الفرص المثيرة التي تحدث هذا الشهر!",
        "event1_title": "مهرجان الصيف الموسيقي 🎵",
        "event5_title": "يوم المرح المجتمعي",
        "event1_desc": "مهرجان موسيقي لمدة ثلاثة أيام يضم فرقاً محلية",
        "event5_desc": "ألعاب، أكشاك طعام، وترفيه لجميع الأعمار",
        "carousel2_title": "معرض الطعام الدولي 🌮",
        "carousel2_desc": "تذوق أطباقاً من جميع أنحاء العالم في مكان واحد.",
        "carousel3_title": "ماراثون المدينة السنوي 🏃",
        "carousel3_desc": "انضم إلى أكبر سباق لهذا العام!",
        "events_page_title": "جميع فعاليات المدينة",
        "events_page_desc": "تصفح القائمة الكاملة للأحداث التي تجري في المدينة.",
        "filter_category_title": "تصفية حسب الفئة",
        "filter_date_title": "تصفية حسب التاريخ",
        "category_all": "جميع الفئات",
        "category_music": "الموسيقى",
        "category_sports": "الرياضة",
        "category_arts": "الفنون والثقافة",
        "category_food": "الطعام والشراب",
        "filter_family": "عائلية",
        "filter_search_label": "بحث:",
        "search_placeholder": "البحث بالاسم أو الموقع...",
        "no_results_message": "لم يتم العثور على فعاليات مطابقة لمعاييرك",
        "filter_apply": "تطبيق الفلاتر",
        "card_date": "🗓️ التاريخ:",
        "card_location": "📍 الموقع:",
        "card_category": "🏷️ الفئة:",
        "card_price_label": "💲 السعر:",
        "book_tickets_button": "احجز التذاكر الآن",
        "watch_promo_button": "شاهد العرض الترويجي على يوتيوب",
        "add_to_calendar": "📅 أضف إلى التقويم",
        "share_text": "مشاركة:",
        "share_facebook": "فيسبوك",
        "share_twitter": "إكس",
        "share_email": "البريد",
        "event_about_title": "حول الفعالية",
        "event_quick_facts_title": "حقائق سريعة عن الفعالية",
        "contact_organizer_button": "اتصل بالمنظم",
        "related_events_title": "فعاليات ذات صلة قد تعجبك",
        "event_not_found": "لم يتم العثور على الفعالية.",
        "no_related_events": "لم يتم العثور على فعاليات ذات صلة في نفس الفئة.",
        "about_page_title": "حول دليل فعاليات المدينة",
        "about_page_desc": "دليلك الشامل للفعاليات والأنشطة المحلية.",
        "mission_title": "مهمتنا",
        "mission_text1": "مهمتنا هي ربط الناس بالحياة النابضة للمدينة. نؤمن بأن كل زاوية في المدينة تحمل قصة فريدة، أو فعالية مثيرة، أو جوهرة مخفية تنتظر الاكتشاف. من خلال تجميع جميع الفعاليات المحلية في منصة واحدة سهلة الاستخدام، نضمن لك عدم تفويت أي شيء.",
        "mission_text2": "سواء كان معرضاً فنياً صغيراً، أو مهرجاناً موسيقياً كبيراً، أو تجمعاً مجتمعياً محلياً، فإن هدفنا هو أن نكون المصدر الأكثر شمولاً وموثوقية للترفيه في المدينة.",
        "our_team_title": "فريقنا",
        "our_team_text": "تم تطوير مشروع دليل فعاليات المدينة كجزء من مساق برمجة الويب (BWP401). فريقنا ملتزم ببناء تطبيقات ويب قوية وسهلة الوصول وسهلة الاستخدام. نحن فخورون بهذا المشروع ونسعى باستمرار لتحسين تجربة المستخدم.",
        "tech_stack_title": "التقنيات المستخدمة",
        "tech_stack_1": "Bootstrap 5 (للتصميم المتجاوب)",
        "tech_stack_2": "HTML5 و CSS3",
        "tech_stack_3": "جافاسكريبت فانيلا (للتوطين والتصفية)",
        "contributor_title": "**المساهمون في المشروع**",
        "contributor_hala_name": "هالة نجمة",
        "contributor_thaer_name": "ثائر شعيرية",
        "contributor_hani_name": "هاني عباس",
   
        "contributor_hala_role": "مدير المشروع ومطور رئيسي",
        "contributor_thaer_role": "مطور واجهات وتصفية",
        "contributor_hani_role": "أخصائي توطين واختبار",

        "contributor_course": "**المساق**",
        "contributor_instructor": "**المُدرّب: د. باسل الخطيب**",
        "contact_sidebar_title": "اتصال سريع",
        "contact_us_button": "اتصل بنا",
        "view_events_button": "عرض جميع الفعاليات",
        "contact_page_title": "اتصل بنا",
        "contact_page_desc": "لديك سؤال أو ترغب في التعاون؟ تواصل معنا!",
        "contact_form_title": "أرسل لنا رسالة",
        "contact_form_name": "اسمك",
        "contact_form_email": "عنوان البريد الإلكتروني",
        "contact_form_subject": "الموضوع",
        "contact_form_message": "الرسالة",
        "contact_form_submit": "إرسال الرسالة",
        "contact_info_title": "معلومات الاتصال",
        "contact_info_email_label": "البريد الإلكتروني:",
        "contact_info_phone_label": "الهاتف:",
        "contact_info_address_label": "العنوان:",
        "contact_office_hours_title": "ساعات العمل",
        "contact_hours_details": "الاثنين - الجمعة: 9:00 صباحاً - 5:00 مساءً",
        "contact_follow_us_title": "تابعنا",
        "social_facebook": "فيسبوك",
        "social_twitter": "تويتر",
        "social_instagram": "إنستغرام",
        "event1_title_about_text1": "مهرجان الصيف الموسيقي هو الحدث الموسيقي السنوي الأول في المدينة، يحتفل بالمواهب المحلية ويجذب الآلاف من الزوار. يضم مسارح متعددة، وشاحنات طعام، ومنشآت فنية.",
        "event1_title_about_text2": "التذاكر تُباع بسرعة. احجز مكانك الآن للتذكرة لمدة ثلاثة أيام!",
        "upcoming_event_1_title_about_text1": "يجمع معرض الغذاء العالمي أكثر من 50 بائعاً دولياً يقدمون أطباقاً أصيلة وتجارب طعام فريدة. إنه يوم مثالي لعشاق الطعام.",
        "upcoming_event_1_title_about_text2": "الدخول مجاني، لكن تعال جائعاً! استمتع بعروض الطبخ والموسيقى الثقافية الحية.",
        "upcoming_event_3_title_about_text1": "يعرض هذا المعرض السنوي أعمالاً فنية معاصرة لفنانين محليين وعالميين صاعدين. استكشف المنحوتات واللوحات والفن الرقمي في بيئة متحف مذهلة.",
        "upcoming_event_3_title_about_text2": "تتوفر مطبوعات محدودة للبيع. انضم إلى حفل الافتتاح في اليوم الأول!",
        "upcoming_event_2_title_about_text1": "شارك في أكبر سباق سنوي في المدينة! اختر بين الماراثون الكامل، أو نصف الماراثون، أو سباق الـ 5 كيلومترات الممتع. تذهب جميع العائدات إلى الجمعيات الخيرية المحلية للأطفال.",
        "upcoming_event_2_title_about_text2": "سجّل مبكراً لتأمين مكانك والحصول على قميص وميدالية تذكارية.",
        "event5_title_about_text1": "يوم مثالي لجميع أفراد العائلة! استمتع بالرسم على الوجه، والقلاع النطاطة، وبائعي الطعام المحليين، وعروض المجموعات المجتمعية. جميع الأنشطة مجانية.",
        "event5_title_about_text2": "انضم إلينا في جناح حديقة المدينة ليوم مليء بالابتسامات والروح المجتمعية. تستمر الفعالية من 10 صباحاً حتى 4 مساءً.",
        "error_invalid_date": "تاريخ غير صالح",
        "date_range_separator": " - ",
    }
};

let currentLang = localStorage.getItem('lang') || 'en';

function applyDirection(lang) {
    if (lang === 'ar') {
        document.body.style.direction = 'rtl';
        document.body.style.textAlign = 'right';
    } else {
        document.body.style.direction = 'ltr';
        document.body.style.textAlign = 'left';
    }
}

function localizeDates(lang) {
    const eventDateRows = document.querySelectorAll('.event-date-row');
    const options = { year: 'numeric', month: 'long', day: 'numeric' };
    const invalidDateText = translations[lang]['error_invalid_date'] || 'Invalid Date';
    const separator = translations[lang]['date_range_separator'] || ' - ';

    eventDateRows.forEach(row => {
        const isoDate = row.getAttribute('data-date-iso');
        const isoEndDate = row.getAttribute('data-end-date-iso');
        const displayElement = row.querySelector('.event-date-display');
        
        if (!displayElement) return;

        let displayDate = invalidDateText;
        let success = false;

  
        if (isoDate && isoEndDate && isoEndDate.length > 0) {
            const startDate = new Date(isoDate);
            const endDate = new Date(isoEndDate);

            if (!isNaN(startDate.getTime()) && !isNaN(endDate.getTime())) {
                const startStr = startDate.toLocaleDateString(lang, options);
                const endStr = endDate.toLocaleDateString(lang, options);
                
         
                displayDate = startStr + separator + endStr;
                success = true;
            }
        } 
        

        if (!success && isoDate) {
            try {
                const date = new Date(isoDate);
                if (!isNaN(date.getTime())) {
                    displayDate = date.toLocaleDateString(lang, options);
                    success = true;
                }
            } catch (e) {
                console.warn(`Date parsing failed for: ${isoDate}`, e);
            }
        }
        
        displayElement.textContent = displayDate;
    });
}


function translatePage(lang) {
    document.querySelectorAll('[data-key]').forEach(element => {
        const key = element.getAttribute('data-key');
        if (translations[lang] && translations[lang][key]) {
            let content = translations[lang][key];

            if ((element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') && element.hasAttribute('placeholder')) {
                // للـ placeholders
                element.placeholder = content.replace(/\*{2}/g, '');
            } 
            else {
         
                element.innerHTML = content;
            }
        }
    });

    const titleElement = document.querySelector('title');
    if (titleElement) {
        const titleKey = titleElement.getAttribute('data-key');
        if (titleKey && translations[lang][titleKey]) {
            titleElement.textContent = translations[lang][titleKey];
        }
    }


    const searchInput = document.getElementById('eventSearch');
    if (searchInput && translations[lang]['search_placeholder']) {
        searchInput.placeholder = translations[lang]['search_placeholder'];
    }

    localizeDates(lang);
    applyDirection(lang);
}

function initializeLanguage() {
    currentLang = localStorage.getItem('lang') || 'en';
    
    const langSwitcher = document.getElementById('lang-switcher');
    if (langSwitcher) {
        langSwitcher.textContent = currentLang === 'en' ? 'EN/AR' : 'AR/EN';
        if (!langSwitcher.hasAttribute('data-listener-added')) {
            langSwitcher.addEventListener('click', (e) => {
                e.preventDefault();
                currentLang = (currentLang === 'en') ? 'ar' : 'en';
                localStorage.setItem('lang', currentLang);
                langSwitcher.textContent = currentLang === 'en' ? 'EN/AR' : 'AR/EN';
                
                translatePage(currentLang);
                document.dispatchEvent(new Event('languageChanged'));
            });
            langSwitcher.setAttribute('data-listener-added', 'true');
        }
    }
    
    translatePage(currentLang);
    applyDirection(currentLang);
    document.dispatchEvent(new Event('languageChanged'));
}

document.addEventListener('DOMContentLoaded', initializeLanguage);










